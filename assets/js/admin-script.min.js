window.STB_Admin=function(a){"use strict";function b(){h.find(".stb-trigger-options").toggle(""!==this.value)}function c(){a(this).parents("tr").remove()}function d(){var b=a(this).parents("tr"),c=b.find(".stb-rule-value");switch(i.hide(),c.show(),this.value){case"":default:c.attr("placeholder","Leave empty to match anything or enter a comma-separated list of IDs or slugs");break;case"everywhere":c.hide();break;case"is_single":c.attr("placeholder","Leave empty to match any post or enter a comma-separated list of post IDs or slugs");break;case"is_page":c.attr("placeholder","Leave empty to match any page or enter a comma-separated list of page IDs or slugs");break;case"is_post_type":c.attr("placeholder","Leave empty to match any post type or enter a comma-separated list of post type names");break;case"manual":c.attr("placeholder","Example: is_single(1, 3)"),i.show()}}function e(){var a=h.find(".stb-rule-row").last(),b=a.clone();return b.find("th > label").text("Or"),b.insertAfter(a).find(":input").val("").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(a,b){return"["+(parseInt(b,10)+1)+"]"})}).trigger("change"),!1}function f(b){"string"==typeof b&&(b=document.getElementById("stb-"+b)),this._element=b,this.getColorValue=function(){return this._element.value.length>0?a(this._element).wpColorPicker("color"):""},this.getPxValue=function(){return this._element.value.length>0?parseInt(this._element.value)+"px":""},this.getValue=function(){return this._element.value.length>0?this._element.value:""},this.clear=function(){this._element.value=""}}var g=a("#stb-box-appearance-controls"),h=a("#stb-box-options-controls"),i=h.find(".stb-manual-tip");h.on("click",".stb-add-rule",e),h.on("click",".stb-remove-rule",c),h.on("change",".stb-rule-condition",d),h.find(".stb-auto-show-trigger").on("change",b),a(window).load(function(){"undefined"==typeof window.tinyMCE&&(document.getElementById("notice-notinymce").style.display="block")});var j=function(){function b(){e=a("#content_ifr").contents().find("html"),e.addClass("scroll-triggered-box stb stb-"+j),h=e.find("#tinymce"),e.css({background:"white"}),h.addClass("stb-content"),h.get(0).style.cssText+=";padding: 25px !important;",h.css({display:"inline-block",height:"auto","min-width":"200px"}),i=document.createElement("style"),i.setAttribute("type","text/css"),i.id="stb-manual-css",a(i).appendTo(e.find("head")),c(),a(document).trigger("editorInit.stb")}function c(){i.innerHTML=k.manualCSS.getValue(),h.css({"border-color":k.borderColor.getColorValue(),"border-width":k.borderWidth.getPxValue(),"border-style":k.borderStyle.getValue(),"background-color":k.backgroundColor.getColorValue(),width:k.width.getPxValue(),color:k.color.getColorValue()}),a(document).trigger("applyBoxStyles.stb")}function d(){for(var b in k)k[b].clear();c(),a(document).trigger("resetBoxStyles.stb")}var e,h,i,j=document.getElementById("post_ID").value||0,k={};return k.borderColor=new f("border-color"),k.borderWidth=new f("border-width"),k.borderStyle=new f("border-style"),k.backgroundColor=new f("background-color"),k.width=new f("width"),k.color=new f("color"),k.manualCSS=new f("manual-css"),g.find("input.stb-color-field").wpColorPicker({change:c,clear:c}),g.find(":input").not(".stb-color-field").change(c),{init:b,resetStyles:d}}();return{Designer:j}}(window.jQuery);