window.STBAdmin=function(a){"use strict";function b(){g.find(".stb-trigger-options").toggle(""!==this.value)}function c(){a(this).parents("tr").remove()}function d(){var b=a(this).parents("tr"),c=b.find(".stb-rule-value");switch(h.hide(),c.show(),this.value){case"":default:c.attr("placeholder","Leave empty to match anything or enter a comma-separated list of IDs or slugs");break;case"everywhere":c.hide();break;case"is_single":c.attr("placeholder","Leave empty to match any post or enter a comma-separated list of post IDs or slugs");break;case"is_page":c.attr("placeholder","Leave empty to match any page or enter a comma-separated list of page IDs or slugs");break;case"is_post_type":c.attr("placeholder","Leave empty to match any post type or enter a comma-separated list of post type names");break;case"manual":c.attr("placeholder","Example: is_single(1, 3)"),h.show()}}function e(){var a=g.find(".stb-rule-row").last(),b=a.clone();return b.find("th > label").text("Or"),b.insertAfter(a).find(":input").val("").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(a,b){return"["+(parseInt(b,10)+1)+"]"})}).trigger("change"),!1}var f=a("#stb-box-appearance"),g=a("#stb-box-options"),h=g.find(".stb-manual-tip");g.on("click",".stb-add-rule",e),g.on("click",".stb-remove-rule",c),g.on("change",".stb-rule-condition",d),g.find(".stb-auto-show-trigger").on("change",b);var i={};return i.init=function(){var b=document.getElementById("post_ID").value||0;i.$editor=a("#content_ifr").contents().find("html"),i.$innerEditor=i.$editor.find("#tinymce"),i.$editor.css({background:"white"}),i.$innerEditor.addClass("stb").addClass("scroll-triggered-box").addClass("stb-"+b),i.$innerEditor.get(0).style.cssText+=";padding: 25px !important;",i.$innerEditor.css({display:"inline-block",height:"auto","min-width":"200px"}),i.styleEl=document.createElement("style"),i.styleEl.id="stb-manual-css",a(i.styleEl).appendTo(i.$editor.find("head")),i.applyStyles(),a(document).trigger("editorInit.stb")},i.fields={borderColor:document.getElementById("stb-border-color"),borderWidth:document.getElementById("stb-border-width"),borderStyle:document.getElementById("stb-border-style"),backgroundColor:document.getElementById("stb-background-color"),width:document.getElementById("stb-width"),color:document.getElementById("stb-color"),manualCSS:document.getElementById("stb-manual-css")},i.getColor=function(b,c){return i.fields[b].value.length>0?a(i.fields[b]).wpColorPicker("color"):"undefined"!=typeof c?c:""},i.getPxValue=function(a,b){return i.fields[a].value.length>0?parseInt(i.fields[a].value)+"px":"undefined"!=typeof b?b:0},i.getValue=function(a,b){return i.fields[a].value.length>0?i.fields[a].value:"undefined"!=typeof b?b:""},i.applyStyles=function(){i.styleEl.innerHTML=i.fields.manualCSS.value,i.$innerEditor.css({"border-color":i.getColor("borderColor","initial"),"border-width":i.getPxValue("borderWidth",""),"border-style":i.getValue("borderStyle",""),"background-color":i.getColor("backgroundColor","inherit "),width:i.getPxValue("width","auto"),color:i.getColor("color","inherit ")}),a(document).trigger("applyBoxStyles.stb")},f.find("input.stb-color-field").wpColorPicker({change:i.applyStyles,clear:i.applyStyles}),f.find(":input").not(".stb-color-field").change(i.applyStyles),{onTinyMceInit:i.init}}(window.jQuery);