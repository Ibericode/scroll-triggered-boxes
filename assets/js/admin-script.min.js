window.STBAdmin=function(a){"use strict";function b(){a(this).parents("tr").remove()}function c(){var b=a(this).parents("tr"),c=b.find(".stb-rule-value");switch(g.hide(),c.show(),this.value){case"":default:c.attr("placeholder","Leave empty to match anything or enter a comma-separated list of IDs or slugs");break;case"everywhere":c.hide();break;case"is_single":c.attr("placeholder","Leave empty to match any post or enter a comma-separated list of post IDs or slugs");break;case"is_page":c.attr("placeholder","Leave empty to match any page or enter a comma-separated list of page IDs or slugs");break;case"is_post_type":c.attr("placeholder","Leave empty to match any post type or enter a comma-separated list of post type names");break;case"manual":c.attr("placeholder","Example: is_single(1, 3)"),g.show()}}function d(){var a=f.find(".stb-rule-row").last(),b=a.clone();return b.find("th > label").text("Or"),b.insertAfter(a).find(":input").val("").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(a,b){return"["+(parseInt(b,10)+1)+"]"})}).trigger("change"),!1}var e=a("#stb-box-appearance"),f=a("#stb-box-options"),g=f.find(".stb-manual-tip");f.on("click",".stb-add-rule",d),f.on("click",".stb-remove-rule",b),f.on("change",".stb-rule-condition",c),a("#stb_trigger").change(function(){a(this).parents("tr").find("input").hide().end().find("input.stb-trigger-"+a(this).val()).show()});var h={};return h.init=function(){var b=document.getElementById("post_ID").value||0;h.$editor=a("#content_ifr").contents().find("html"),h.$innerEditor=h.$editor.find("#tinymce"),h.$editor.css({background:"white"}),h.$innerEditor.addClass("stb").addClass("scroll-triggered-box").addClass("stb-"+b),h.$innerEditor.get(0).style.cssText+=";padding: 25px !important;",h.$innerEditor.css({display:"inline-block",height:"auto","min-width":"200px"}),h.styleEl=document.createElement("style"),h.styleEl.id="stb-manual-css",a(h.styleEl).appendTo(h.$editor.find("head")),h.applyStyles(),a(document).trigger("editorInit.stb")},h.fields={borderColor:document.getElementById("stb-border-color"),borderWidth:document.getElementById("stb-border-width"),borderStyle:document.getElementById("stb-border-style"),backgroundColor:document.getElementById("stb-background-color"),width:document.getElementById("stb-width"),color:document.getElementById("stb-color"),manualCSS:document.getElementById("stb-manual-css")},h.getColor=function(b,c){return h.fields[b].value.length>0?a(h.fields[b]).wpColorPicker("color"):"undefined"!=typeof c?c:""},h.getPxValue=function(a,b){return h.fields[a].value.length>0?parseInt(h.fields[a].value)+"px":"undefined"!=typeof b?b:0},h.getValue=function(a,b){return h.fields[a].value.length>0?h.fields[a].value:"undefined"!=typeof b?b:""},h.applyStyles=function(){h.styleEl.innerHTML=h.fields.manualCSS.value,h.$innerEditor.css({"border-color":h.getColor("borderColor","initial"),"border-width":h.getPxValue("borderWidth",""),"border-style":h.getValue("borderStyle",""),"background-color":h.getColor("backgroundColor","inherit "),width:h.getPxValue("width","auto"),color:h.getColor("color","inherit ")}),a(document).trigger("applyBoxStyles.stb")},e.find("input.stb-color-field").wpColorPicker({change:h.applyStyles,clear:h.applyStyles}),e.find(":input").not(".stb-color-field").change(h.applyStyles),{onTinyMceInit:h.init}}(window.jQuery);